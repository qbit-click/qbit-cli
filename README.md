# Qbit CLI

Qbit یک ابزار CLI کراس پلتفرم است که برای تکمیل جریان کاری ابزار‌های موجود طراحی شده است. این ابزار عملیات متداول توسعه را با یک رابط یکتا ساده می‌کند و به شما اجازه می‌دهد وابستگی‌ها و محیط پروژه را از طریق همان فرمان مدیریت کنید.

## ویژگی‌ها

- نصب نرم‌افزارهای سیستمی از طریق فرمان‌های ساده مانند:
  ```
  qbit install java
  qbit install chrome:127.0.0.0
  ```
  این فرمان‌ها بسته را با استفاده از مدیر بستهٔ پیش‌فرض سیستم‌عامل نصب می‌کنند (در ویندوز `winget`, در توزیع‌های دبیان/اوبونتو `apt`, و در macOS `brew`). می‌توانید نسخهٔ دقیق را هم با ساختار `نام:نسخه` مشخص کنید.

- آماده‌سازی سریع محیط پروژه‌های زبان‌های مختلف. برای مثال:
  ```
  qbit py init
  ```
  فولدر فعلی را برای یک پروژه پایتون آماده می‌کند و ساختار و فایل‌های اولیه را می‌سازد.

- مدیریت وابستگی هر زبان با رابط یکپارچه. نمونه‌هایی از استفاده:
  ```
  qbit py add pandas
  qbit js add react
  ```
  فرمان `add` بسته را در محیط استاندارد همان زبان نصب می‌کند؛ برای پایتون علاوه بر نصب پکیج، آن را به فایل `requirements.txt` اضافه می‌کند تا وابستگی‌ها نسخه‌بندی شده ثبت شوند.
- اجرای اسکریپت‌های پروژه از طریق `qbit run <name>` که اسکریپت‌ها را از فایل `qbit.yml` (یا `qbit.toml`) خوانده و به صورت ترتیبی اجرا می‌کند. برای مثال:
  ```
  qbit run dev
  ```
  اسکریپت `dev` را طبق تعریف شما اجرا می‌کند. همچنین می‌توانید برای هر زبان اسکریپت اختصاصی داشته باشید، مانند:
  ```
  qbit js run start
  ```
  که اسکریپت‌های `package.json` را با استفاده از npm/pnpm/yarn/bun اجرا می‌کند.

## جریان کاری پایتون

- `qbit py init`: یک محیط مجازی اختصاصی (مثلاً `.venv`) می‌سازد، فایل `requirements.txt` را ایجاد یا بروزرسانی می‌کند و ساختار پوشه‌ای اولیه (مانند `src/` یا `app.py`) را آماده می‌کند تا بتوانید فوراً کدنویسی را آغاز کنید.
- `qbit py add <package>`: پکیج را در محیط مجازی فعال نصب می‌کند و در صورت وجود نسخه مشخص‌شده، همان نسخه را نصب می‌کند. سپس نام و نسخه نصب‌شده را به `requirements.txt` اضافه می‌کند تا در تیم‌های مختلف یا محیط CI قابل بازتولید باشد.
- `qbit py add --dev <package>` (در صورت نیاز): پکیج را به بخش وابستگی‌های توسعه منتقل می‌کند؛ این فایل جداگانه‌ای مانند `requirements-dev.txt` ایجاد می‌کند تا محیط تولید و توسعه از هم تفکیک شوند.
- خروجی تمام فرمان‌ها وضعیت عملیات را به صورت قابل خواندن نمایش می‌دهد تا بتوانید سریعاً خطاهای نصب یا کانفیگ را پیدا کنید.

## فایل پیکربندی `qbit.yml`

- در روت پروژه یک فایل YAML/TOML با نام `qbit.yml` یا `qbit.toml` قرار دهید و اسکریپت‌ها/وابستگی‌های سفارشی خود را در آن تعریف کنید. اگر از فرمان `qbit js init` استفاده کنید، یک فایل نمونه `qbit.yml` به صورت خودکار ساخته می‌شود تا نقطه شروع داشته باشید. نمونه‌ای از ساختار:
  ```yaml
  scripts:
    dev: "npm run dev"
    build-all:
      - "qbit js run build"
      - "cargo build --release"

  install:
    postgres:
      version: "15"
      identifiers:
        apt: "postgresql"
        winget: "PostgreSQL.PostgreSQL"
        default: "postgresql"
    redis:
      version: "7.2"
      identifiers:
        apt: "redis-server"
        winget: "Redis.Redis-CLI"
  ```
- با فرمان `qbit run <script>` اسکریپت‌های تعریف‌شده اجرا می‌شوند و با `qbit install <target>` اگر نام هدف در بخش `install` وجود داشته باشد، نسخهٔ مشخص‌شده نصب می‌شود (برای مثال `postgres` با شناسه‌های اختصاصی در apt/winget). همچنین می‌توانید به صورت مستقیم نسخه را در خط فرمان مشخص کنید (`qbit install chrome:127.0.0.0`). در غیر این صورت از برنامه‌ی نصب داخلی استفاده می‌شود.

## نصب سیستم‌ها

- qbit به صورت خودکار مدیر بستهٔ مناسب را تشخیص می‌دهد:
  - ویندوز: `winget install ... --accept-*`
  - macOS: `brew install`
  - دبیان/اوبونتو: `sudo apt-get install`
  - سایر پلتفرم‌های ویندوزی/لینوکسی را می‌توانید با متغیر `QBIT_PACKAGE_MANAGER` به `winget/apt/brew/choco/scoop` مجبور کنید.
- نسخهٔ موردنظر یا از `qbit.yml` (بخش `install`) خوانده می‌شود یا مستقیماً از `نام:نسخه` در خط فرمان استخراج می‌گردد و در دستور نصب مصرف می‌شود. برای مثال در Debian دستور کامل `sudo apt-get install google-chrome-stable=127.0.0.0` اجرا خواهد شد.

## شروع به کار

1. مخزن را کلون کنید و باینری CLI را بسازید:
   ```
   cargo build --release
   ```
2. باینری ساخته شده در `target/release/qbit` آماده اجرا است؛ می‌توانید آن را در مسیر دلخواه خود قرار دهید.
3. دستور `qbit --help` را اجرا کنید تا لیست کامل فرمان‌ها و زیر فرمان‌ها را مشاهده کنید.

## مشارکت

- گزارش باگ و درخواست ویژگی را در بخش Issues ثبت کنید.
- برای مشارکت، پیش از ارسال Pull Request حتماً تست‌ها را اجرا کنید و توضیح مختصری از تغییرات ارائه دهید.

## مجوز

این پروژه تحت مجوز مندرج در فایل `LICENSE` منتشر شده است.
